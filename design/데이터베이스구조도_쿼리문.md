## ERD
- ìœ ì˜ ì‚¬í•­
- **login_id** 
	- ì§ì› í…Œì´ë¸”ê³¼ ê´€ë¦¬ì í…Œì´ë¸”ì— ë‘˜ë‹¤ ìˆìŒ
	- ë‘˜ ë‹¤ ì§ì› ë˜ëŠ” ê´€ë¦¬ìê°€ ë¡œê·¸ì¸ í•  ë•Œ í•„ìš”í•œ ì†ì„±ì„.
- **administrator_id** ì™€ **user_id**
	- ì´ ì†ì„±ì€ ê´€ë¦¬ì í…Œì´ë¸”, ì§ì› í…Œì´ë¸” ì¸ë±ì‹±ê³¼ ì°¸ì¡°í‚¤ë¡œ í™œìš©í•˜ê¸° ìœ„í•´ ë§Œë“¤ì—ˆìŒ.

![](https://i.imgur.com/idxtrVf.png)

## DDL
- ì§ì› ì •ë³´ í…Œì´ë¸” ìƒì„±
- ì¶œê·¼, í‡´ê·¼ ì‹œê°„ í…Œì´ë¸” ìƒì„±
- ê·¼íƒœ ì‹ ì²­ ì •ë³´ ê¸°ë¡ í…Œì´ë¸” ìƒì„±
- ê´€ë¦¬ì ê³„ì • í…Œì´ë¸” ìƒì„±
- ê¸°ì—… ê°¤ëŸ¬ë¦¬ í…Œì´ë¸” ìƒì„±

```sql

-- ì§ì› ì •ë³´
CREATE TABLE IF NOT EXISTS users (
    user_id integer primary key,
    login_id text unique not null,
    user_password TEXT not null ,
    name TEXT not null,
    email TEXT,
    position TEXT,
    phone TEXT,
    img TEXT,
    is_deleted INTEGER DEFAULT 0
);


-- ì¶œê·¼ ì‹œê°„
CREATE TABLE IF NOT EXISTS time_punch (
    punch_id integer primary key,
    user_id integer not null,
    punch_in text,
    punch_out text,
    FOREIGN KEY (user_id) REFERENCES users(user_id)
);

-- drop table attendance;

-- ê·¼íƒœ ì‹ ì²­
create table if not exists attendance(
    attendance_id integer PRIMARY KEY,
    user_id integer not null,
    title text,
    content text,
    attendance_start_date text,
    attendance_days integer,
    attendance_type text not null,
    attendance_apply_time text DEFAULT (datetime('now', '+9 hours')),
    FOREIGN KEY (user_id) REFERENCES users(user_id)
);


-- drop table administrator;

-- ê´€ë¦¬ì ê³„ì •
create table if not exists administrator(
    administrator_id integer primary key,
    login_id text unique,
    name text not null,
	administrator_password text not null,
    user_id integer unique,
    FOREIGN KEY (user_id) REFERENCES users(user_id)
);

-- ê¸°ì—… ê°¤ëŸ¬ë¦¬
create table if not exists company_gallery(
    gallery_id integer primary key,
    administrator_id integer not null,
    title TEXT,
    content text,
    img text,
    FOREIGN KEY (administrator_id) REFERENCES administrator(administrator_id)
);



```

## DML
1. ì§ì› CRUD
2. ê·¼íƒœ ì‹ ì²­ CRUD
3. ê´€ë¦¬ì ê³„ì • CRUD
4. ì§ì› ê·¼ë¬´ ì‹œê°„ ê´€ë¦¬
5. ê¸°ì—… ê°¤ëŸ¬ë¦¬ CRUD

```sql
-- 1. ì§ì› CRUD

-- 1-1. ì§ì› ë“±ë¡
-- ì§ì› ì´ë¦„, ì•„ì´ë””, ë¹„ë°€ë²ˆí˜¸, ì§ê¸‰ì„ ë“±ë¡í•¨.
insert into
    users(login_id, user_password, name, position)
    values('C1234', '1234','ê³ ë‚™ì—°','ëŒ€ë¦¬');

-- 1-2. ì§ì› ë¡œê·¸ì¸
-- í•´ë‹¹ ì§ì› ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•¨.
-- í•´ë‹¹ ì§ì›ì´ ì¡´ì¬í•œë‹¤ë©´ ì§ì› ì•„ì´ë””, ì´ë©”ì¼, ì§ê¸‰, í•¸ë“œí°ë²ˆí˜¸, í”„ë¡œí•„ì´ë¯¸ì§€ë¥¼ ë¦¬í„´í•¨.
select
    login_id, email, position, phone, img
from
    users
where
    login_id = 'C1234'
    and user_password = '1234';

-- 1-3. ì§ì› ì •ë³´ ìˆ˜ì •
-- ì§ì›ì˜ ì •ë³´ ìˆ˜ì •
-- ì§ì›ì€ ìì‹ ì˜ ë¹„ë°€ë²ˆí˜¸ì™€ ì´ë©”ì¼, í•¸ë“œí°ë§Œ ìˆ˜ì •ì´ ê°€ëŠ¥í•˜ë‹¤.
update users
set
    user_password='1235',
    email='dada@company.com',
    phone='010-1234-5679',
    img='https://i.imgur.com/NBEIFBz.png'
where login_id = 'C1234';

-- 1-4. ê´€ë¦¬ìì˜ ì§ì› ì •ë³´ ìˆ˜ì •
-- ê´€ë¦¬ìëŠ” ì§ì›ì˜ ì•„ì´ë””, ë¹„ë°€ë²ˆí˜¸, ì´ë©”ì¼, í•¸ë“œí°, ì§ê¸‰, ì´ë¦„, ì´ë©”ì¼ì„ ë‹¤ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤.
update users
set
    login_id = 'C2345',
    user_password = '2345',
    email='dada@company.com',
    phone='010-1234-5679',
    position='ë¶€ì¥',
    email='badadad1234@gmail.com'
where login_id = 'C1234';

-- 1-5. ì§ì› ì‚­ì œ
-- ì§ì›ì„ ì‚­ì œí•œë‹¤.
-- ì‚­ì œ ë˜ë”ë¼ë„ ë°ì´í„°ë² ì´ìŠ¤ìƒì—ì„œëŠ” ê¸°ë¡ì´ ë‚¨ëŠ”ë‹¤.
update users
set
    is_deleted = 1
where users.login_id = 'C2345';

-- 1-5 ì§ì› ì‚­ì œ ì·¨ì†Œ
-- ì‚­ì œëœ ì§ì›ì„ ì‚­ì œë˜ê¸° ì´ì „ìœ¼ë¡œ ë˜ëŒë¦°ë‹¤.
update users
set
    is_deleted = 0
where users.login_id = 'C2345';

-- 1-6 ì§ì› ì¡°íšŒ
-- ì „ì²´ ì§ì› ì¡°íšŒ
select login_id, user_password, name, email, position, phone, img
from users;
-- íŠ¹ì • ì§ì› ì¡°íšŒ
select *
from users
where login_id='C2345';


-- 2. ê·¼íƒœ ì‹ ì²­ CRUD

-- 2-1 ê·¼íƒœ ì‹ ì²­í•˜ê¸°
-- ì œëª©, ë‚´ìš©, ê·¼íƒœ ì‹œì‘ì¼, ê·¼íƒœ ê¸°ê°„, ê·¼íƒœ íƒ€ì… ì…ë ¥ì´ í•„ìš”
insert into
    attendance(user_id, title, content, attendance_start_date, attendance_days, attendance_type)
values
    ((select u.user_id from users u where u.login_id = 'C2345'),
       'ê·¼íƒœì‹ ì²­í•©ë‹ˆë‹¤',
       'ì¹œì •ì–´ë¨¸ë‹ˆ ìƒì‹ ìœ¼ë¡œ ì—°ì°¨ ì‹ ì²­í•©ë‹ˆë‹¤.',
        '2024-04-06',
       1,
       'ì—°ì°¨');

-- 2-2 ê·¼íƒœ ì‹ ì²­ ë‚´ì—­ ì¡°íšŒ
-- ì§ì› ì „ì²´ ê·¼íƒœ ì‹ ì²­ ë‚´ì—­ ì¡°íšŒ
-- ê·¼íƒœ ì‹ ì²­ ë²ˆí˜¸, ì§ì› ì´ë¦„, ì§ì› ì•„ì´ë””, ì§ì› ì‹ ì²­ ë‚´ì—­(ì œëª©, ë‚´ìš©, ê·¼íƒœê¸°ê°„, ê·¼íƒœ íƒ€ì…, ë“±)ì´ ì¡°íšŒë¨.
select
    a.attendance_id, u.login_id, u.name, title, content, attendance_start_date, attendance_days, attendance_type, attendance_apply_time
from
    attendance a, users u
where a.user_id = u.user_id;


-- 2-2 ê·¼íƒœ ì‹ ì²­ ë‚´ì—­ ì¡°íšŒ - í•„í„° ê¸°ëŠ¥
-- ê·¼íƒœ íƒ€ì…(ì—°ì°¨, ë°˜ì°¨, ì¡°í‡´, ê¸°íƒ€)ë¥¼ ì„ íƒí•´ í•´ë‹¹ ê·¼íƒœ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒê°€ ê°€ëŠ¥í•¨.
select
    a.attendance_id, u.login_id, u.name, title, content, attendance_start_date, attendance_days, attendance_type, attendance_apply_time
from
    attendance a, users u
where a.user_id = u.user_id and a.attendance_type = 'ì—°ì°¨';

-- 2-2 ê·¼íƒœ ì‹ ì²­ ë‚´ì—­ ì¡°íšŒ - ì§ì› ì´ë¦„ ê²€ìƒ‰
-- ì§ì› ì´ë¦„ìœ¼ë¡œ ê·¼íƒœ ë‚´ì—­ ì¡°íšŒê°€ ê°€ëŠ¥í•¨.
select *
from attendance;


-- 2-3 ê·¼íƒœ ì‹ ì²­ ë‚´ì—­ ìˆ˜ì •
-- ì§ì› ì•„ì´ë””ë¥¼ ì´ìš©í•´ì„œ ìˆ˜ì • ê°€ëŠ¥
update attendance
set
    title = 'ê·¼íƒœë¥¼ ì‹ ì²­í•´ì•¼ ë©ë‹ˆë‹¤.',
    content = 'ì œ ìƒì¼ì´ë¼ ì‹ ì²­í•©ë‹ˆë‹¤.',
    attendance_start_date = '2023-08-05',
    attendance_type = 'ë°˜ì°¨',
    attendance_days = 0.5
where user_id = (select user_id from users where login_id = 'C2345');


-- 2-4 ê·¼íƒœ ì‹ ì²­ ë‚´ì—­ ì‚­ì œ
-- ê·¼íƒœ ì‹ ì²­ ë‚´ì—­ ë²ˆí˜¸ë¥¼ ì´ìš©í•´ì„œ ì‚­ì œ ê°€ëŠ¥í•¨.
delete
from attendance
where attendance_id = 1;


-- 3. ê´€ë¦¬ì ê³„ì • CRUD

-- 3-1. ê´€ë¦¬ì ê³„ì • ìƒì„±
-- ê´€ë¦¬ì ì•„ì´ë””, ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸, ì§ì› ì•„ì´ë””, ì´ë¦„ë¥¼ ë„£ì–´ì„œ ìƒì„± ê°€ëŠ¥í•¨.
insert into
    administrator(login_id, administrator_password, user_id, name)
    values ('K1234','1q2w3e4r',(select user_id from users where users.login_id = 'C2345'), 'ê³ ë‚™ì—°');

insert into
    administrator(login_id, administrator_password, name)
    values ('K1235', '1q2w3e4r5t', 'ê¹€ë‚™ì—°');

insert into
    administrator(login_id, administrator_password, name)
    values ('K1238', '1q2w3e4r5t', 'ê¹€ë‚™ì—°');

-- 3-2. ê´€ë¦¬ì ê³„ì • ì¡°íšŒ
select *
from administrator;

select *
from administrator
where login_id = 'K1234';

-- 3-3. ê´€ë¦¬ì ê³„ì • ìˆ˜ì •
update administrator
set
    login_id= 'K3456',
    administrator_password = '123455435',
    name = 'ì˜¤ë‚™ì—°'
where login_id = 'K1234';


-- 3-4. ê´€ë¦¬ì ê³„ì • ì‚­ì œ
delete
from administrator
where login_id = 'K1234';


-- 4. ê·¼ë¬´ ì‹œê°„ ê´€ë¦¬

-- 4-1. ì¶œê·¼ ì‹œê°„ ê°±ì‹ 

-- ë§Œì•½, ì¶œê·¼ ì‹œê°„ ê¸°ë¡ë¶€ì— c1234 ì•„ì´ë””ì˜ ì§ì›ì˜ ì¶œê·¼ ê¸°ë¡ì´ ìˆê³  í‡´ê·¼ ê¸°ë¡ì´ ì—†ë‹¤ë©´
-- ì¶œê·¼ ê¸°ë¡ì„ ê°±ì‹  í•˜ì§€ ì•ŠëŠ”ë‹¤.

-- ì¶œê·¼ ê¸°ë¡ì´ ì—†ë‹¤ë©´ ë˜ëŠ” ì¶œê·¼ ê¸°ë¡ì´ ìˆìœ¼ë‚˜ í‡´ê·¼ê¸°ë¡ë„ ì¡´ì¬í•œë‹¤ë©´ ì¶œê·¼ ê¸°ë¡ì„ ê°±ì‹ í•œë‹¤.

select punch_id, user_id, punch_in, punch_out
from time_punch
where
    user_id = (select user_id from users where login_id = 'C1234')
  and punch_out is null;


insert into time_punch(user_id, punch_in, punch_out)
values (
        (select user_id from users where login_id = 'C1234'),
        datetime('now',  '+9 hours' ),
        null
       );



-- 4-2. í‡´ê·¼ ì‹œê°„ ê°±ì‹ 
-- ì¶œê·¼ ì‹œê°„ì´ ìˆëŠ” ê²½ìš°ì—ë§Œ í‡´ê·¼ ì‹œê°„ì„ ê°±ì‹ í•œë‹¤.
update time_punch
set
    punch_out  = datetime('now','+9 hours')
where
    user_id = (select user_id from users where login_id = 'C1234')
  and punch_out is null;



-- 4-3. ì¶œê·¼ ì‹œê°„ ê°±ì‹  ì·¨ì†Œ

-- ì¶œê·¼ ì‹œê°„ ê°±ì‹  ë‚´ì—­ì„ í™•ì¸í•˜ê³ ë‚˜ì„œ, íŠ¹ì • ì¶œê·¼ ì‹œê°„ ê°±ì‹ ì„ ì·¨ì†Œ í•  ìˆ˜ ìˆìŒ.
select
    punch_id,
    punch_in,
    punch_out
from time_punch
where
    user_id = (select user_id from users where login_id = 'C1234');

delete
from time_punch
where punch_id = 1;


-- 4-4. í‡´ê·¼ ì‹œê°„ ê°±ì‹  ì·¨ì†Œ

-- ì¶œê·¼ ì‹œê°„ ê°±ì‹  ë‚´ì—­ì„ í™•ì¸í•˜ê³ ë‚˜ì„œ, íŠ¹ì • í‡´ê·¼ ì‹œê°„ ê°±ì‹ ì„ ì·¨ì†Œ í•  ìˆ˜ ìˆìŒ.
select
    punch_id,
    punch_in,
    punch_out
from time_punch
where
    user_id = (select user_id from users where login_id = 'C1234');

delete
from time_punch
where punch_id = 2;



-- 4-5. ì¶œê·¼ ì‹œê°„ ìˆ˜ì •
-- ì¶œê·¼ ì‹œê°„ ë‚´ì—­ í™•ì¸ í›„, íŠ¹ì • ì¶œê·¼ ì‹œê°„ ë‚´ì—­ì„ ìˆ˜ì • í•  ìˆ˜ ìˆìŒ.

select
    punch_id,
    punch_in,
    punch_out
from time_punch
where
    user_id = (select user_id from users where login_id = 'C1234');

update time_punch
set
    punch_in = datetime('now','+9 hours')
where punch_id = 2;

-- 4-6. í‡´ê·¼ ì‹œê°„ ìˆ˜ì •
-- í‡´ê·¼ ì‹œê°„ ë‚´ì—­ í™•ì¸ í›„, íŠ¹ì • í‡´ê·¼ ì‹œê°„ ë‚´ì—­ì„ ìˆ˜ì • í•  ìˆ˜ ìˆìŒ.
select
    punch_id,
    punch_in,
    punch_out
from time_punch
where
    user_id = (select user_id from users where login_id = 'C1234');

update time_punch
set
    punch_out = datetime('now','+9 hours')
where punch_id = 2;


-- 5. ê¸°ì—… ê°¤ëŸ¬ë¦¬ CRUD

-- 5-1 ê°¤ëŸ¬ë¦¬ ê¸€ ê°±ì‹ 
insert into company_gallery(
            administrator_id,
            title,
            content,
            img)
    values(
           (select administrator_id from administrator where login_id = 'K1235'),
           'ì—¬ë¦„ í•©ìˆ™ ì—°ìˆ˜',
           '~ì—°ìˆ˜ í–ˆë˜ ë‚´ìš©~',
           'https://i.imgur.com/2Vmid1P.jpeg'
          );

-- 5-1 ê°¤ëŸ¬ë¦¬ ê¸€ ì¡°íšŒ
select
    a.login_id,
    title,
    content,
    img
from company_gallery c, administrator a
where c.administrator_id = a.administrator_id;

-- 5-2 ê°¤ëŸ¬ë¦¬ íŠ¹ì • ê¸€ ì¡°íšŒ
select
    a.login_id,
    title,
    content,
    img
from company_gallery c, administrator a
where c.administrator_id = a.administrator_id
and gallery_id = 1;

-- 5-3 ê°¤ëŸ¬ë¦¬ ê¸€ ìˆ˜ì •
-- ìê¸°ê°€ ì‘ì„±í•œ ê¸€ë§Œ ìˆ˜ì • ê°€ëŠ¥í•¨.
-- ê´€ë¦¬ì ê³„ì •ì„ ê°€ì§€ê³  ìˆëŠ” ê²½ìš° ê¸€ ìˆ˜ì • ê°€ëŠ¥í•¨.
update company_gallery
set
    title = 'ê²¨ìš¸ í•©ìˆ™ ì—°ìˆ˜',
    content = 'ê²¨ìš¸ í•©ìˆ™ ì—°ìˆ˜ ë‚´ìš© ì„¤ëª…',
    img='https://i.imgur.com/3R9iaYo.jpeg'
where gallery_id = 1
and administrator_id = (select administrator_id from administrator where login_id = 'K1234');

-- 5-4 ê°¤ëŸ¬ë¦¬ ê¸€ ì‚­ì œ
delete from company_gallery
where gallery_id =1;


-- ê¸°íƒ€
select *
from time_punch
where punch_id = 1;

select *
from time_punch;
select *
from users;

select user_id from users where login_id = 'C1234';

select administrator_id from administrator where login_id = 'K1234';

select *
from administrator;

delete
from time_punch;
```

## ì°¸ê³  ë¬¸ì„œ
- [ğŸ“‹ ë°ì´í„° ëª¨ë¸ë§ ê°œë… & ERD ë‹¤ì´ì–´ê·¸ë¨ ì‘ì„± ğŸ’¯ ì´ì •ë¦¬](https://inpa.tistory.com/entry/DB-%F0%9F%93%9A-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%AA%A8%EB%8D%B8%EB%A7%81-1N-%EA%B4%80%EA%B3%84-%F0%9F%93%88-ERD-%EB%8B%A4%EC%9D%B4%EC%96%B4%EA%B7%B8%EB%9E%A8)